<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.15.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="article">
<meta property="og:title" content="Vue3基础">
<meta property="og:url" content="http://example.com/2023/04/15/Vue3%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="Z">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230415231055729.png">
<meta property="og:image" content="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230416000823071.png">
<meta property="og:image" content="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230416003556697.png">
<meta property="og:image" content="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230426090335263.png">
<meta property="og:image" content="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230426095212856.png">
<meta property="article:published_time" content="2023-04-15T15:03:12.000Z">
<meta property="article:modified_time" content="2023-04-26T08:16:57.290Z">
<meta property="article:author" content="LiuZ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230415231055729.png">


<link rel="canonical" href="http://example.com/2023/04/15/Vue3%E5%9F%BA%E7%A1%80/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2023/04/15/Vue3%E5%9F%BA%E7%A1%80/","path":"2023/04/15/Vue3基础/","title":"Vue3基础"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Vue3基础 | Z</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Z</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Vue%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.</span> <span class="nav-text">使用Vue创建项目</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="nav-number">2.</span> <span class="nav-text">Vue基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#main-js%E4%B8%AD%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-number">2.1.</span> <span class="nav-text">main.js中的概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9Amethods"><span class="nav-number">2.2.</span> <span class="nav-text">组件中的方法：methods</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%EF%BC%9Acomputed"><span class="nav-number">2.3.</span> <span class="nav-text">组件中的计算属性：computed</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI%EF%BC%88setup%EF%BC%89"><span class="nav-number">2.4.</span> <span class="nav-text">组合式API（setup）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E4%BB%A3%E7%90%86"><span class="nav-number">2.5.</span> <span class="nav-text">响应式代理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-bind-%E6%A0%87%E7%AD%BE%E5%8A%A8%E6%80%81%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="nav-number">2.6.</span> <span class="nav-text">v-bind 标签动态属性设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="nav-number">2.7.</span> <span class="nav-text">样式设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0%EF%BC%9A%E4%BD%BF%E7%94%A8Vue%E6%90%AD%E5%BB%BA%E5%B0%8F%E7%BD%91%E9%A1%B5"><span class="nav-number">2.8.</span> <span class="nav-text">练习：使用Vue搭建小网页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%88%B6%E7%BB%84%E4%BB%B6%E9%80%9A%E8%BF%87-props-%E5%B0%86%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%E7%BB%99%E5%AD%90%E7%BB%84%E4%BB%B6"><span class="nav-number">2.9.</span> <span class="nav-text">父组件通过 props 将数据传递给子组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-show-%E3%80%81v-if-%E5%88%87%E6%8D%A2%E6%98%BE%E7%A4%BA"><span class="nav-number">2.10.</span> <span class="nav-text">v-show 、v-if 切换显示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="nav-number">2.11.</span> <span class="nav-text">动态组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-for"><span class="nav-number">2.12.</span> <span class="nav-text">v-for</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E6%A7%BD"><span class="nav-number">2.13.</span> <span class="nav-text">插槽</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%EF%BC%88state%EF%BC%89"><span class="nav-number">2.14.</span> <span class="nav-text">状态管理（state）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pinia"><span class="nav-number">2.15.</span> <span class="nav-text">Pinia</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E5%92%8C%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92%EF%BC%88ajax%EF%BC%89"><span class="nav-number">2.16.</span> <span class="nav-text">前端和后端交互（ajax）</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LiuZ</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/15/Vue3%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiuZ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Vue3基础 | Z">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vue3基础
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-15 23:03:12" itemprop="dateCreated datePublished" datetime="2023-04-15T23:03:12+08:00">2023-04-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-04-26 16:16:57" itemprop="dateModified" datetime="2023-04-26T16:16:57+08:00">2023-04-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><img src="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230415231055729.png" alt="image-20230415231055729"></p>
<span id="more"></span>

<h1 id="使用Vue创建项目"><a href="#使用Vue创建项目" class="headerlink" title="使用Vue创建项目"></a>使用Vue创建项目</h1><p>1.首先cd到工作目录当中，然后使用下面的语句，搭建Vue的开发框架</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vue</span><br></pre></td></tr></table></figure>

<p>2.然后根据项目需要选择对应模块，我这边作为熟悉项目框架，所以都选择了no</p>
<p><img src="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230416000823071.png" alt="image-20230416000823071"></p>
<p>3.这时已经创建好了一个项目，但是环境还没进行安装，所以还需要使用下面的指令，对环境进行安装，并将项目跑起来</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 安装依赖</span></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="comment">//启动项目</span></span><br><span class="line">npm run dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4.我们删除其他页面，并新建一个App.vue页面，并对页面进行简单编辑与显示</p>
<p><img src="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230416003556697.png" alt="image-20230416003556697"></p>
<hr>
<h1 id="Vue基础知识"><a href="#Vue基础知识" class="headerlink" title="Vue基础知识"></a>Vue基础知识</h1><h2 id="main-js中的概念"><a href="#main-js中的概念" class="headerlink" title="main.js中的概念"></a>main.js中的概念</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	App.vue是根组件</span></span><br><span class="line"><span class="comment">		- CreateApp(App)：将根组件关联到应用上</span></span><br><span class="line"><span class="comment">			- 会返回一个应用的实例</span></span><br><span class="line"><span class="comment">		- app.mount(&#x27;#app&#x27;)：将应用挂载到页面中</span></span><br><span class="line"><span class="comment">			- 会返回一个根组件的实例，组件的实例通常命名为vm</span></span><br><span class="line"><span class="comment">			- 组件实例是一个Proxy()对象（代理对象）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="keyword">const</span> vm = app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="组件中的方法：methods"><a href="#组件中的方法：methods" class="headerlink" title="组件中的方法：methods"></a>组件中的方法：methods</h2><p><strong>methods</strong> 用来指定实例对象中的方法</p>
<ul>
<li>它是一个<strong>对象</strong>，可以在它里面定义多个方法</li>
<li>这些方法最终会被挂载到组件实例上</li>
<li>可以直接通过组件实例来调用这些方法</li>
<li>methods 中函数的<strong>this会被自动绑定为组件实例</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)   <span class="comment">//组件实例， vm</span></span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;实例对象的方法&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">changeMsg</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">msg</span> = <span class="string">&quot;新的消息！&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeMsg&quot;</span>&gt;</span>点我一下<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="组件中的计算属性：computed"><a href="#组件中的计算属性：computed" class="headerlink" title="组件中的计算属性：computed"></a>组件中的计算属性：computed</h2><p><strong>computed</strong> 用来指定计算属性</p>
<p>在计算属性getter中，尽量<strong>只做读取</strong>相关的逻辑，不要执行哪些会产生（副）作用的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    属性名：getter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>计算属性，只在其依赖的数据发生变化时才会重新执行</li>
<li><strong>会对数据进行缓存</strong></li>
<li>可以为计算属性设置setter，使得计算属性可写，但是<strong>不建议这样做</strong></li>
</ul>
<h2 id="组合式API（setup）"><a href="#组合式API（setup）" class="headerlink" title="组合式API（setup）"></a>组合式API（setup）</h2><p>组合式API（setup）一般都是放在script标签内部</p>
<ul>
<li>使用组合式API，我们可以在script中直接定义变量和函数</li>
<li>使用组合式API直接<strong>定义的变量就是一个普通变量，不是响应式变量</strong></li>
<li>通过<strong>reactive函数</strong>可以在setup中<strong>创建一个响应式对象</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">    <span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line">    <span class="keyword">const</span> msg = <span class="string">&quot;组合式API&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建响应式变量</span></span><br><span class="line">    <span class="keyword">const</span> stu = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;原&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="响应式代理"><a href="#响应式代理" class="headerlink" title="响应式代理"></a>响应式代理</h2><p><strong>reactive()</strong></p>
<ul>
<li>返回一个<strong>对象</strong>的响应式代码</li>
<li>返回的是一个深层响应式对象</li>
<li>也可以使用shallowReactive()创建一个浅层响应式对象</li>
<li>缺点：<strong>只能返回对象的响应式代理！不能处理原始值</strong></li>
</ul>
<p><strong>ref()</strong></p>
<ul>
<li>接受一个任意值，并返回它的响应式代理</li>
<li><strong>访问ref对象</strong>时，必须通过 <strong>对象.value</strong>  来访问其中的值</li>
<li>在模板中，ref对象会被<strong>自动解包</strong>，不需要使用 对象.value.属性名，直接使用 <strong>对象.属性名</strong> 就可以直接访问</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">    <span class="keyword">import</span> &#123; reactive,ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line">    <span class="keyword">const</span> msg = <span class="string">&quot;组合式API&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建响应式变量</span></span><br><span class="line">    <span class="keyword">const</span> stu = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;原&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ref在生成响应式代理时，它是将值包装成了一个对象  0  ---&gt; &#123;value:0&#125;</span></span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)     <span class="comment">//生成一个0的响应式代理                                                                        </span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="v-bind-标签动态属性设置"><a href="#v-bind-标签动态属性设置" class="headerlink" title="v-bind 标签动态属性设置"></a>v-bind 标签动态属性设置</h2><p>对标签的属性进行动态设置时，需要使用到 v-bind 指令，</p>
<p>v-bind可以简写为  <strong>：</strong></p>
<p>当我们为一个布尔值设置属性时，如果为<strong>true</strong>则表示元素上<strong>有该属性</strong>，如果为<strong>false</strong>，则元素上<strong>没有该属性</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">const</span> imgPath = <span class="title function_">ref</span>(<span class="string">&quot;/images/messi.png&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeImg</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    imgPath.<span class="property">value</span> = <span class="string">&quot;/images/neymar.png&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> attrs = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;box1&quot;</span>,</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&quot;hello&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> attrName = <span class="string">&quot;title&quot;</span></span><br><span class="line"><span class="keyword">const</span> attrValue = <span class="string">&quot;这是一个title属性&quot;</span></span><br><span class="line"><span class="keyword">const</span> isDisabled = <span class="string">&quot;&quot;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- &lt;button @click=&quot;changeImg&quot;&gt;切换图片&lt;/button&gt; --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:</span>[<span class="attr">attrName</span>]=<span class="string">&quot;attrValue&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;imgPath&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;梅西&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span></span><br><span class="line"><span class="language-xml">    //绑定属性组</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:</span>=<span class="string">&quot;attrs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;isDisabled&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="样式设置"><a href="#样式设置" class="headerlink" title="样式设置"></a>样式设置</h2><p>可以直接通过<strong>style标签</strong>来编写样式，<br>如果直接通过style标签写样式，此时编写的样式是<strong>全局样式</strong>会影响到所有的组件</p>
<p>可以为<strong>style标签添加一个scoped属性</strong>，<br>  这样样式将成为<strong>局部样式</strong>，只对当前组件生效<br>如何实现的？</p>
<ul>
<li><p>当我们在组件中使用scoped样式时，<br>vue会自动为组件中的所有元素生成一个随机的属性<br>形如：data-v-7a7a37b1<br>生成后，所有的选择器都会在最后添加一个 [data-v-7a7a37b1]<br>  h1 -&gt; h1[data-v-7a7a37b1]<br>  .box1 -&gt; .box1[data-v-7a7a37b1]</p>
</li>
<li><p>注意：</p>
<p>  随机生成的属性，除了会添加到当前组件内的所有元素上，<br>  也会添加到当前组件引入的其他组件的<strong>根元素</strong>上，这样设计<br>  是为了，可以通过父组件来为子组件设置一些样式.</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">h1 &#123;</span><br><span class="line">    background-<span class="attr">color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">box1</span> &#123;</span><br><span class="line">    <span class="attr">width</span>: 200px;</span><br><span class="line">    <span class="attr">height</span>: 200px;</span><br><span class="line">    background-<span class="attr">color</span>: #bfa;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">将组件中所有的 h2的字体颜色设置为黄色 </span></span><br><span class="line"><span class="comment">.app h2 --&gt; .app h2[xxxxx]</span></span><br><span class="line"><span class="comment">.app h2[data-v-7a7a37b1] 没用deep</span></span><br><span class="line"><span class="comment">.app[data-v-7a7a37b1] h2 用了deep</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">.<span class="property">app</span> :<span class="title function_">deep</span>(<span class="params">h2</span>) &#123;</span><br><span class="line">    <span class="attr">color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  :global() 全局选择器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">:<span class="title function_">global</span>(<span class="params">div</span>) &#123;</span><br><span class="line">    <span class="attr">border</span>: 1px red solid;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>style 表情内部也已设置全局样式（global()），这样就能全局生效了</p>
<hr>
<h2 id="练习：使用Vue搭建小网页"><a href="#练习：使用Vue搭建小网页" class="headerlink" title="练习：使用Vue搭建小网页"></a>练习：使用Vue搭建小网页</h2><hr>
<h2 id="父组件通过-props-将数据传递给子组件"><a href="#父组件通过-props-将数据传递给子组件" class="headerlink" title="父组件通过 props 将数据传递给子组件"></a>父组件通过 props 将数据传递给子组件</h2><p>使用props</p>
<ul>
<li>先在子组件中定义props</li>
<li>定义属性名要遵循<strong>驼峰命名法</strong></li>
</ul>
<p>注意：<strong>使用props</strong>传递的数据是<strong>单向的</strong>,子组件是<strong>无法修改</strong>父组件传递的数据</p>
<p><strong>子组件</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">    <span class="comment">// 定义一个props</span></span><br><span class="line">    <span class="keyword">const</span> props = <span class="title function_">defineProps</span>([<span class="string">&#x27;item&#x27;</span>])</span><br><span class="line">    <span class="keyword">const</span> item = props.<span class="property">item</span></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>父组件</strong>传递信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TabItem</span> <span class="keyword">from</span> <span class="string">&quot;./components/TabItem.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义传入的属性信息</span></span><br><span class="line"><span class="keyword">const</span> player = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;梅西&#x27;</span>,</span><br><span class="line">  <span class="attr">img</span>:<span class="string">&#x27;./images/messi.png&#x27;</span>,</span><br><span class="line">  <span class="attr">rate</span>:<span class="number">1</span>,</span><br><span class="line">  <span class="attr">hot</span>:<span class="number">433760</span></span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		// 通过使用 :子组件定义的传递属性 来动态绑定数据</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">TabItem</span> <span class="attr">:item</span>=<span class="string">&quot;player&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">TabItem</span>&gt;</span>&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="v-show-、v-if-切换显示"><a href="#v-show-、v-if-切换显示" class="headerlink" title="v-show 、v-if 切换显示"></a>v-show 、v-if 切换显示</h2><p><strong>v-show</strong> 可以根据值来决定元素是否显示（通过display来切换元素的显示状态）</p>
<p><strong>v-if</strong> 可以根据表达式的值来决定是否显示元素（会<strong>直接将元素删除</strong>）</p>
<ul>
<li><strong>v-show</strong>通过css来切换组件的显示与否，切换时不会涉及到组件的重新渲染切换的性能比较高。</li>
<li>但是初始化时，需要对所有组件进行初始化（即使组件暂时不显示）所以它的初始化的性能要差一些！</li>
<li><strong>v-if</strong> 通过删除添加元素的方式来切换元素的显示，切换时反复的渲染组件，切换的性能比较差。</li>
<li><strong>v-if</strong> 只会初始化需要用到的组件，所以它的<strong>初始化性能比较好</strong></li>
<li>v-if可以和 v-else-if 和 v-else结合使用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;isShow = !isShow&quot;</span>&gt;切换&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>显示<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h2><p>Vue自带的组件标签，不需要引入：**<component></component>**</p>
<p>通过这个组件我们可以改变 <strong>is</strong> 后面的标签来改变组件，当然is后面也可以是<strong>用户的自定义组件</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">is</span>=<span class="string">&#x27;标签名&#x27;</span>&gt;</span>我是动态组件<span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">is</span>=<span class="string">&#x27;div&#x27;</span>&gt;</span>我是动态组件<span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">is</span>=<span class="string">&#x27;h1&#x27;</span>&gt;</span>我是动态组件<span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h2><p>这就是一个循环遍历的效果，它在哪个组件上面，该组件就会根据数据进行生成,</p>
<p>它在生成的时候是<strong>按顺序生成的</strong>，所以你在修改的时候他会发生改变</p>
<p>在使用v-for时，可以为元素指定一个<strong>唯一的key</strong></p>
<p>有了key之后，元素再比较时就会<strong>按照相同的key</strong>去比较而不是顺序</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//id时item中的一个属性</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in arr&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123; item &#125;&#125;</span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><p>希望在父组件中指定子组件中的内容</p>
<ul>
<li>我们可以通过插槽（slot）来实现该需求</li>
<li>通过插槽引入组件，位于父组件的作用域中</li>
</ul>
<p>具名插槽</p>
<ul>
<li>入口：v-slot:name</li>
<li>在插槽定义的时候要给一个name属性：&lt;slot name:”aa”&gt;</slot></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyButton</span> <span class="keyword">from</span> <span class="string">&quot;./components/MyButton.vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> A <span class="keyword">from</span> <span class="string">&quot;./components/A.vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyWrapper</span> <span class="keyword">from</span> <span class="string">&quot;./components/MyWrapper.vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;孙悟空&quot;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>App组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- </span></span></span><br><span class="line"><span class="comment"><span class="language-xml">        希望在父组件中指定子组件中的内容</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">            - 我们可以通过插槽（slot）来实现该需求</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">        &lt;MyButton&gt;插槽的入口&lt;/MyButton&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-xml"></span></span></span><br><span class="line"><span class="comment"><span class="language-xml">        &lt;button&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">            &lt;slot&gt;&lt;/slot&gt;  插槽的出口</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">        &lt;/button&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-xml"></span></span></span><br><span class="line"><span class="comment"><span class="language-xml">        通过插槽引入组件，位于父组件的作用域中</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">    --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- &lt;MyButton&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">        &lt;A :name=&quot;name&quot;&gt;&lt;/A&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">    &lt;/MyButton&gt; --&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">MyWrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- 具名插槽的入口 --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:aa</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">bb</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">MyWrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="状态管理（state）"><a href="#状态管理（state）" class="headerlink" title="状态管理（state）"></a>状态管理（state）</h2><p>状态管理</p>
<ul>
<li><p><strong>状态</strong>（state）</p>
<ul>
<li>应用当中的数据就是状态</li>
<li>状态即数据</li>
</ul>
</li>
<li><p><strong>视图</strong>（view）</p>
<ul>
<li>视图用来呈现数据，用户通过视图访问数据</li>
</ul>
</li>
<li><p><strong>交互</strong>（actions）</p>
<ul>
<li><p>用户的操作</p>
</li>
<li><p>状态会根据用户在视图中的操作发生变化</p>
</li>
</ul>
</li>
<li><p><strong>提升状态</strong></p>
<pre><code>    - 当有多个组件需要使用到同一个state时，可以将state提升到这些组件共同的祖先组件中声明
        这样一来所有这些组件便都可以通过祖先元素来访问到这个state；（通过父组件进行==provide==，子组件使用==inject()==来接受来自父组件的数据）
</code></pre>
</li>
</ul>
<h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><p>Vue中的官方状态管理库相对于store，用Pinia进行管理更能规范化</p>
<p>Pinia的安装<strong>查看官方文档即可</strong></p>
<p><strong>store实例本身就是一个reactive对象</strong></p>
<ul>
<li>可以通过它直接访问state中的数据</li>
<li>但是如果直接将state中数据解构出来，那么数据将会丧失响应性</li>
</ul>
<p><strong>可以通过storeToRefs()来对store进行解构</strong></p>
<ul>
<li>它可以将state和getters中的属性解构为ref属性，从而保留其响应性</li>
</ul>
<p> state的修改</p>
<p>store订阅</p>
<p><strong>$onAction 用来订阅action的调用</strong></p>
<p>返回值：</p>
<p>·1.name 调用的action的名字</p>
<p>2.store store的实例</p>
<p>3.args action接收到的参数</p>
<p>4.after() 可以设置一个回调函数，函数会在action成功调用后触发</p>
<p>5.onError() 可以设置一个回调函数，函数会在action调用失败后触发</p>
<hr>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, inject &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">// import &#123; countStore &#125; from &quot;../store/count&quot;</span></span><br><span class="line"><span class="comment">// const &#123; count, increment &#125; = inject(&quot;count&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; useStudentStore &#125; <span class="keyword">from</span> <span class="string">&quot;@/store/studentStore.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stuStore = <span class="title function_">useStudentStore</span>()</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">    store实例本身就是一个reactive对象，</span></span><br><span class="line"><span class="comment">        可以通过它直接访问state中的数据</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    但是如果直接将state中数据解构出来，那么数据将会丧失响应性</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    可以通过storeToRefs()来对store进行解构，</span></span><br><span class="line"><span class="comment">        它可以将state和getters中的属性解构为ref属性，从而保留其响应性</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    state的修改：</span></span><br><span class="line"><span class="comment">        1. 直接修改</span></span><br><span class="line"><span class="comment">        2. 通过$patch</span></span><br><span class="line"><span class="comment">        3. 通过$patch传函数的形式的修改</span></span><br><span class="line"><span class="comment">        4. 直接替换state</span></span><br><span class="line"><span class="comment">        5. 重置state</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// const &#123; name, age &#125; = stuStore</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; name, age, title &#125; = <span class="title function_">storeToRefs</span>(stuStore)</span><br><span class="line"></span><br><span class="line"><span class="comment">// state中的属性（方法），都可以通过store对象直接访问</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">clickHandler</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    stuStore.$patch(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;孙小圣&quot;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="attr">skills</span>: [<span class="string">&quot;救命毫毛&quot;</span>]</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// stuStore.$patch((state) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     state.skills.push(&quot;救命毫毛&quot;)</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// stuStore.skills.push(&quot;哈哈&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// stuStore.$patch(&#123; name: &quot;孙小圣&quot; &#125;)</span></span><br><span class="line">    <span class="comment">// stuStore.$state = &#123; name: &quot;孙小圣&quot; &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">    store的订阅</span></span><br><span class="line"><span class="comment">        - 当store中的state发生变化时，做一些响应的操作</span></span><br><span class="line"><span class="comment">        - store.$subscribe(函数, 配置对象)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">stuStore.$subscribe(</span><br><span class="line">    <span class="function">(<span class="params">mutation, state</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// mutation 表示修改的信息</span></span><br><span class="line">        <span class="comment">// console.log(mutation.events)</span></span><br><span class="line">        <span class="comment">// console.log(mutation.events[0] === mutation.events[1])</span></span><br><span class="line">        <span class="comment">// console.log(mutation.payload)</span></span><br><span class="line">        <span class="comment">// if(state.token)&#123;</span></span><br><span class="line">        <span class="comment">//     // 登录，向本地存储中添加内容</span></span><br><span class="line">        <span class="comment">// &#125;else&#123;</span></span><br><span class="line">        <span class="comment">//     // 登出，从本地存储中移除内容</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// console.log(&quot;state发生变化了&quot;, state)</span></span><br><span class="line">        <span class="comment">// 使用订阅时不要在回调函数中直接修改state</span></span><br><span class="line">        <span class="comment">// state.age++</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">detached</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// $onAction 用来订阅action的调用</span></span><br><span class="line">stuStore.$onAction(<span class="function">(<span class="params">&#123; name, store, args, after, onError &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">        name 调用的action的名字</span></span><br><span class="line"><span class="comment">        store store的实例</span></span><br><span class="line"><span class="comment">        args action接收到的参数</span></span><br><span class="line"><span class="comment">        after() 可以设置一个回调函数，函数会在action成功调用后触发</span></span><br><span class="line"><span class="comment">        onError() 可以设置一个回调函数，函数会在action调用失败后触发</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">after</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(name + <span class="string">&quot;成功执行！&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onError</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(name + <span class="string">&quot;执行失败！&quot;</span>, err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ComponentC -- &#123;&#123; name &#125;&#125; -- &#123;&#123; age &#125;&#125; -- &#123;&#123; title &#125;&#125; --</span></span><br><span class="line"><span class="language-xml">        &#123;&#123; stuStore.double &#125;&#125; --</span></span><br><span class="line"><span class="language-xml">        &#123;&#123; stuStore.skills &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- &#123;&#123; countStore.count &#125;&#125; --</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">        &lt;button @click=&quot;countStore.increment&quot;&gt;按钮&lt;/button&gt; --&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;stuStore.growUp&quot;</span>&gt;</span>长大<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;stuStore.name = &#x27;孙大圣&#x27;&quot;</span>&gt;</span>修改name<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;clickHandler&quot;</span>&gt;</span>patch修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;stuStore.$reset()&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="前端和后端交互（ajax）"><a href="#前端和后端交互（ajax）" class="headerlink" title="前端和后端交互（ajax）"></a>前端和后端交互（ajax）</h2><p>因为用的是Vue，所以我们使用了 <strong>axios</strong>  ，这个就是对&#x3D;&#x3D;ajax&#x3D;&#x3D;的再次封装产生的</p>
<p>1.使用npm 包引入 axios</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios --save</span><br></pre></td></tr></table></figure>

<p>2.在&#x3D;&#x3D;src&#x3D;&#x3D;目录下新建一个 &#x3D;&#x3D;axios.js&#x3D;&#x3D;,用来创建axios实例,这样方便配置信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>:<span class="string">&#x27;http://localhost:3001/&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br></pre></td></tr></table></figure>

<p>3.在 <strong>src</strong> 中新建一个api文件夹，在内部编写需要调用api的方法，我在<strong>api</strong>文件夹中新建了一个 &#x3D;&#x3D;manager.js&#x3D;&#x3D;,并在内部写方法</p>
<p><img src="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230426090335263.png" alt="image-20230426090335263"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;../axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//请求用户信息API</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUsers</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/user/get&#x27;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//新建用户API</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">creatUser</span>(<span class="params">name,psw,phone,email</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;/user/insert&#x27;</span>,&#123;</span><br><span class="line">        name,</span><br><span class="line">        psw,</span><br><span class="line">        phone,</span><br><span class="line">        email</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>4.然后在需要使用这个API的页面导入方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getUsers, creatUser &#125; <span class="keyword">from</span> <span class="string">&#x27;./api/manager&#x27;</span></span><br></pre></td></tr></table></figure>

<p>5.现在调用这个方法会报错，遇到&#x3D;&#x3D;跨域问题&#x3D;&#x3D;，解决方法有两种，一种在后端解决，一种在前端解决</p>
<p><strong>后端解决方法</strong>：&#x3D;&#x3D;在index.js&#x3D;&#x3D;文件中添加下面代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//跨域问题解决方面</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;*&#x27;</span>,<span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);<span class="comment">//仅支持配置一个域名</span></span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;PUT, POST, GET, DELETE, OPTIONS&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span>,<span class="literal">true</span>)<span class="comment">//允许客户端携带验证信息</span></span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>index.js完整代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//跨域问题解决方面</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;*&#x27;</span>,<span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);<span class="comment">//仅支持配置一个域名</span></span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;PUT, POST, GET, DELETE, OPTIONS&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span>,<span class="literal">true</span>)<span class="comment">//允许客户端携带验证信息</span></span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入自定义的接口文件</span></span><br><span class="line"><span class="keyword">let</span> user = <span class="built_in">require</span>(<span class="string">&#x27;./routers/user&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> home = <span class="built_in">require</span>(<span class="string">&#x27;./routers/home&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用自定义接口</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>,home);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/user&#x27;</span>,user);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3001</span>);</span><br></pre></td></tr></table></figure>

<p><strong>前端解决方案</strong>：修改配置文件中代理文件中的内容，在Vue中是修改<strong>vite.config.js</strong></p>
<p><img src="https://cug.oss-cn-guangzhou.aliyuncs.com/assets/image-20230426095212856.png" alt="image-20230426095212856"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="comment">//配置代理服务，将 http://localhost:3001代理为 /api</span></span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&quot;http://localhost:3001&quot;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>然后还需要将&#x3D;&#x3D;axios.js&#x3D;&#x3D;中的 <strong>baseurl</strong> 改为 &#x3D;&#x3D;&#x2F;api&#x3D;&#x3D; 即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>:<span class="string">&#x27;/api&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;如何将数据传递给后端&#x3D;&#x3D;</p>
<p>1.如果是<strong>get请求</strong>，则可以在后端使用 <strong>res.query.传入的参数</strong>   进行获取，具体代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/get&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> client =  <span class="keyword">new</span> pg.<span class="title class_">Client</span>(conString);</span><br><span class="line">   </span><br><span class="line">    <span class="comment">// 获取传入的数据</span></span><br><span class="line">    <span class="keyword">let</span> name = req.<span class="property">query</span>.<span class="property">name</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//sql语句</span></span><br><span class="line">    selectSQLString = <span class="string">&quot;SELECT * FROM test where name like $1&quot;</span>;</span><br><span class="line">    <span class="comment">//客户端连接，进行数据插入</span></span><br><span class="line">    client.<span class="title function_">connect</span>(<span class="keyword">function</span>(<span class="params">error, results</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">            <span class="comment">// console.log(&#x27;clientConnectionReady Error:&#x27;+error.message);</span></span><br><span class="line">            res.<span class="title function_">send</span>(&#123;</span><br><span class="line">                <span class="attr">status</span>:<span class="string">&#x27;fail&#x27;</span>,</span><br><span class="line">                <span class="attr">msg</span>:error.<span class="property">message</span></span><br><span class="line">            &#125;)</span><br><span class="line">            client.<span class="title function_">end</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;connection success...\n&#x27;</span>);</span><br><span class="line">        client.<span class="title function_">query</span>(selectSQLString,[name],<span class="keyword">function</span>(<span class="params">error,results</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(error)&#123;</span><br><span class="line">                <span class="comment">// console.log(error.message);</span></span><br><span class="line">                res.<span class="title function_">send</span>(&#123;</span><br><span class="line">                    <span class="attr">status</span>:<span class="string">&#x27;fail&#x27;</span>,</span><br><span class="line">                    <span class="attr">msg</span>:error.<span class="property">message</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">// console.log(results.rows);</span></span><br><span class="line">                res.<span class="title function_">send</span>(&#123;</span><br><span class="line">                    <span class="attr">status</span>:<span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">                    <span class="attr">msg</span>:results.<span class="property">rows</span></span><br><span class="line">                &#125;)</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            client.<span class="title function_">end</span>();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>前端&#x3D;&#x3D;get请求&#x3D;&#x3D;的方式：<strong>一定要加上一个params对象</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUsers</span>(<span class="params">name</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/user/get&#x27;</span>,&#123;</span><br><span class="line">        <span class="attr">params</span>: &#123;</span><br><span class="line">            name</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>2.如果是 <strong>post</strong>  请求，则需要在后端安装一个插件：body-parser</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install body-parser --save</span><br></pre></td></tr></table></figure>

<p>然后再&#x3D;&#x3D;index.js&#x3D;&#x3D;文件中配置body-parser环境,整体代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析前端传入的参数配置</span></span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>(&#123;</span><br><span class="line">    <span class="attr">extended</span>:<span class="literal">true</span></span><br><span class="line">&#125;));</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//跨域问题解决方面</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;*&#x27;</span>,<span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);<span class="comment">//仅支持配置一个域名</span></span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;PUT, POST, GET, DELETE, OPTIONS&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span>,<span class="literal">true</span>)<span class="comment">//允许客户端携带验证信息</span></span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入自定义的接口文件</span></span><br><span class="line"><span class="keyword">let</span> user = <span class="built_in">require</span>(<span class="string">&#x27;./routers/user&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> home = <span class="built_in">require</span>(<span class="string">&#x27;./routers/home&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用自定义接口</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>,home);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/user&#x27;</span>,user);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3001</span>);</span><br></pre></td></tr></table></figure>

<p>在需要使用参数的文件内, <strong>.body.属性名</strong>获取数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = req.<span class="property">body</span>.<span class="property">name</span>;</span><br><span class="line"><span class="keyword">let</span> psw = req.<span class="property">body</span>.<span class="property">psw</span>;</span><br><span class="line"><span class="keyword">let</span> phone = req.<span class="property">body</span>.<span class="property">phone</span>;</span><br><span class="line"><span class="keyword">let</span> email = req.<span class="property">body</span>.<span class="property">email</span>;</span><br></pre></td></tr></table></figure>




















    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
            </div>
            <div class="post-nav-item">
                <a href="/2023/04/18/Vm%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="next" title="Vm虚拟机">
                  Vm虚拟机 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiuZ</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
